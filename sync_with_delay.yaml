blueprint:
  name: "ĞĞ±Ğ¾Ğ³Ñ€ĞµĞ²Ğ°Ñ‚ĞµĞ»ÑŒ + Ğ¡Ğ²ĞµÑ‚ (Ğ±ĞµĞ· Ñ†Ğ¸ĞºĞ»Ğ°)"
  description: "Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ°Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: ÑĞ²ĞµÑ‚ â€” Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ¾Ğ±Ğ¾Ğ³Ñ€ĞµĞ²Ğ°Ñ‚ĞµĞ»Ñ"
  domain: automation
  author: "Helper"
  input:
    trigger_entity:
      name: "ğŸ”˜ Ğ£ÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾-Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€"
      selector:
        entity:
    trigger_state:
      name: "ğŸ¯ Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ğ°"
      default: "off"
      selector:
        select:
          options:
            - "on"
            - "off"
    target_entity:
      name: "ğŸ’¡ Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾"
      selector:
        entity:
    action_state:
      name: "âš™ï¸ Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ"
      default: "off"
      selector:
        select:
          options:
            - "on"
            - "off"

trigger:
  - platform: state
    entity_id: !input trigger_entity
    to: !input trigger_state

condition:
  # ğŸ”¹ Ğ“Ğ›ĞĞ’ĞĞĞ•: ĞĞµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑ‚ÑŒ, ĞµÑĞ»Ğ¸ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾ ÑƒĞ¶Ğµ Ğ² Ğ½ÑƒĞ¶Ğ½Ğ¾Ğ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¸
  - condition: template
    value_template: >-
      {{ states(input('target_entity')) != input('action_state') }}

action:
  - service: >-
      {% set domain = states(input('target_entity')).domain %}
      {{ domain }}.turn_{{ input('action_state') }}
    target:
      entity_id: !input target_entity

#mode: single
mode: restart
