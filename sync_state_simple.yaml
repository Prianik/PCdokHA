# sync_with_choice.yaml
blueprint:
  name: "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤—ã–±–æ—Ä–æ–º –¥–µ–π—Å—Ç–≤–∏—è"
  description: "–ì–∏–±–∫–∏–π —à–∞–±–ª–æ–Ω: —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ —Å –≤—ã–±–æ—Ä–æ–º –∫–æ–º–∞–Ω–¥—ã"
  domain: automation
  author: "Helper"
  input:
    trigger_entity:
      name: "üîò –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ-—Ç—Ä–∏–≥–≥–µ—Ä"
      selector:
        entity:
    trigger_state:
      name: "üéØ –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞"
      default: "off"
      selector:
        select:
          options:
            - "on"
            - "off"
    target_entity:
      name: "üí° –¶–µ–ª–µ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
      selector:
        entity:
    action_type:
      name: "‚öôÔ∏è –î–µ–π—Å—Ç–≤–∏–µ"
      default: "turn_off"
      selector:
        select:
          options:
            - label: "–í–∫–ª—é—á–∏—Ç—å"
              value: "turn_on"
            - label: "–í—ã–∫–ª—é—á–∏—Ç—å"
              value: "turn_off"
            - label: "–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å"
              value: "toggle"

trigger:
  - platform: state
    entity_id: !input trigger_entity
    to: !input trigger_state

condition: []

action:
  - choose:
      - conditions:
          - condition: template
            value_template: "{{ input('action_type') == 'turn_on' }}"
        sequence:
          - service: homeassistant.turn_on
            target:
              entity_id: !input target_entity
      - conditions:
          - condition: template
            value_template: "{{ input('action_type') == 'turn_off' }}"
        sequence:
          - service: homeassistant.turn_off
            target:
              entity_id: !input target_entity
    default:
      - service: homeassistant.toggle
        target:
          entity_id: !input target_entity

mode: single
